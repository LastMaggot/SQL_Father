"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[850],{25307:function(H,F,n){n.r(F),n.d(F,{default:function(){return re}});var W=n(42122),c=n.n(W),G=n(17061),a=n.n(G),Z=n(17156),C=n.n(Z),O=n(27424),$=n.n(O),P=n(32966),V=n(64463),i=n(48086),L=n(19650),k=n(27049),D=n(97272),U=n(24565),o=n(71577),d=n(67294),E=n(50146),e=n(85893),N=function(){var M=C()(a()().mark(function u(p){var f;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f=i.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),r.prev=1,r.next=4,(0,P.cq)(c()({},p));case 4:return f(),i.ZP.success("\u6DFB\u52A0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),f(),i.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},u,null,[[1,9]])}));return function(p){return M.apply(this,arguments)}}(),X=function(u){var p=u.modalVisible,f=u.columns,y=u.onSubmit,r=u.onCancel;return(0,e.jsx)(E.Z,{destroyOnClose:!0,title:"\u65B0\u5EFA",open:p,onCancel:function(){return r()},footer:null,children:(0,e.jsx)(V.QVr,{onSubmit:function(){var b=C()(a()().mark(function S(j){var B;return a()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.next=2,N(j);case 2:B=R.sent,B&&(y==null||y());case 4:case"end":return R.stop()}},S)}));return function(S){return b.apply(this,arguments)}}(),rowKey:"id",type:"form",columns:f})})},Y=X,x=function(){var M=C()(a()().mark(function u(p){var f;return a()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f=i.ZP.loading("\u6B63\u5728\u66F4\u65B0"),r.prev=1,r.next=4,(0,P.Pt)(p);case 4:return f(),i.ZP.success("\u66F4\u65B0\u6210\u529F"),r.abrupt("return",!0);case 9:return r.prev=9,r.t0=r.catch(1),f(),i.ZP.error("\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),r.abrupt("return",!1);case 14:case"end":return r.stop()}},u,null,[[1,9]])}));return function(p){return M.apply(this,arguments)}}(),q=function(u){var p=u.oldData,f=u.columns,y=u.modalVisible,r=u.onSubmit,b=u.onCancel;return(0,e.jsx)(E.Z,{destroyOnClose:!0,title:"\u66F4\u65B0",open:y,onCancel:function(){return b()},footer:null,children:(0,e.jsx)(V.QVr,{onSubmit:function(){var S=C()(a()().mark(function j(B){var A;return a()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,x(c()(c()({},B),{},{id:p.id}));case 2:A=I.sent,A&&(r==null||r());case 4:case"end":return I.stop()}},j)}));return function(j){return S.apply(this,arguments)}}(),rowKey:"id",type:"form",form:{initialValues:p},columns:f})})},_=q,ee=function(){var u=(0,d.useState)(!1),p=$()(u,2),f=p[0],y=p[1],r=(0,d.useState)(!1),b=$()(r,2),S=b[0],j=b[1],B=(0,d.useState)({}),A=$()(B,2),R=A[0],I=A[1],K=(0,d.useRef)(),ne={0:{text:"\u672A\u5904\u7406"},1:{text:"\u5DF2\u5904\u7406"}},ae=function(){var h=C()(a()().mark(function g(s){var m,v;return a()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(m=i.ZP.loading("\u6B63\u5728\u5220\u9664"),s!=null&&s.id){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,(0,P.GR)({id:s.id});case 6:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),(v=K.current)===null||v===void 0||v.reload(),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),i.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+t.t0.message);case 13:return t.prev=13,m(),t.finish(13);case 16:case"end":return t.stop()}},g,null,[[3,10,13,16]])}));return function(s){return h.apply(this,arguments)}}(),z=function(){var h=C()(a()().mark(function g(s,m){var v,T;return a()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return v=i.ZP.loading("\u5904\u7406\u4E2D"),l.prev=1,l.next=4,(0,P.Pt)({id:s.id,status:m});case 4:i.ZP.success("\u64CD\u4F5C\u6210\u529F"),(T=K.current)===null||T===void 0||T.reload(),l.next=11;break;case 8:l.prev=8,l.t0=l.catch(1),i.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+l.t0.message);case 11:return l.prev=11,v(),l.finish(11);case 14:case"end":return l.stop()}},g,null,[[1,8,11,14]])}));return function(s,m){return h.apply(this,arguments)}}(),Q=[{title:"id",dataIndex:"id",valueType:"index"},{title:"\u88AB\u4E3E\u62A5\u5BF9\u8C61",dataIndex:"reportedId",valueType:"textarea"},{title:"\u5185\u5BB9",dataIndex:"content",valueType:"textarea"},{title:"\u5BA1\u6838\u72B6\u6001",dataIndex:"status",valueEnum:ne},{title:"\u88AB\u4E3E\u62A5\u4EBA",dataIndex:"reportedUserId",hideInForm:!0},{title:"\u4E3E\u62A5\u4EBA",dataIndex:"userId",valueType:"text",hideInForm:!0},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",valueType:"dateTime",sorter:!0,hideInForm:!0,hideInSearch:!0},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(g,s){return(0,e.jsxs)(L.Z,{split:(0,e.jsx)(k.Z,{type:"vertical"}),children:[(0,e.jsx)(D.Z.Link,{onClick:function(){I(s),j(!0)},children:"\u4FEE\u6539"}),s.status!==1&&(0,e.jsx)(D.Z.Link,{onClick:function(){z(s,1)},children:"\u5904\u7406"}),s.status===1&&(0,e.jsx)(D.Z.Link,{onClick:function(){z(s,0)},children:"\u672A\u5904\u7406"}),(0,e.jsx)(U.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u4E48\uFF1F",onConfirm:function(){return ae(s)},okText:"\u786E\u8BA4",cancelText:"\u53D6\u6D88",children:(0,e.jsx)(D.Z.Link,{type:"danger",children:"\u5220\u9664"})})]})}}];return(0,e.jsxs)(V._zJ,{children:[(0,e.jsx)(V.QVr,{headerTitle:"\u8BCD\u6761\u7BA1\u7406",actionRef:K,rowKey:"id",search:{labelWidth:"auto",defaultCollapsed:!1},toolBarRender:function(){return[(0,e.jsx)(o.Z,{type:"primary",onClick:function(){return y(!0)},children:"\u65B0\u5EFA"},"1")]},request:function(){var h=C()(a()().mark(function g(s,m){var v,T,t,l,J;return a()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:v=c()({},s);for(T in m)v.sortField=T,v.sortOrder=m[T];return w.next=4,(0,P.I3)(v);case 4:return t=w.sent,l=t.data,J=t.code,w.abrupt("return",{data:(l==null?void 0:l.records)||[],success:J===0,total:l.total});case 8:case"end":return w.stop()}},g)}));return function(g,s){return h.apply(this,arguments)}}(),columns:Q}),(0,e.jsx)(Y,{modalVisible:f,columns:Q,onSubmit:function(){},onCancel:function(){return y(!1)}}),(0,e.jsx)(_,{modalVisible:S,oldData:R,columns:Q,onSubmit:function(){},onCancel:function(){return j(!1)}})]})},re=ee},32966:function(H,F,n){n.d(F,{GR:function(){return D},I3:function(){return C},Pt:function(){return L},cq:function(){return $}});var W=n(17061),c=n.n(W),G=n(17156),a=n.n(G),Z=n(18036);function C(o){return O.apply(this,arguments)}function O(){return O=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/list/page",{method:"GET",params:d}));case 1:case"end":return e.stop()}},o)})),O.apply(this,arguments)}function $(o){return P.apply(this,arguments)}function P(){return P=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/add",{method:"POST",headers:{"Content-Type":"application/json"},data:d}));case 1:case"end":return e.stop()}},o)})),P.apply(this,arguments)}function V(o){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function o(d){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/report/get",{method:"GET",params:{id:d}}));case 1:case"end":return e.stop()}},o)})),i.apply(this,arguments)}function L(o){return k.apply(this,arguments)}function k(){return k=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/update",{method:"POST",headers:{"Content-Type":"application/json"},data:d}));case 1:case"end":return e.stop()}},o)})),k.apply(this,arguments)}function D(o){return U.apply(this,arguments)}function U(){return U=a()(c()().mark(function o(d){return c()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,Z.request)("/report/delete",{method:"POST",headers:{"Content-Type":"application/json"},data:d}));case 1:case"end":return e.stop()}},o)})),U.apply(this,arguments)}}}]);
