"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[543],{9543:function(oe,Q,t){t.d(Q,{Z:function(){return ce}});var X=t(42122),i=t.n(X),H=t(27424),u=t.n(H),h=t(17061),Y=t.n(h),P=t(17156),ie=t.n(P),x=t(7189),L=t(91154),m=t(18036),v=t(48086),E=t(38272),g=t(71577),o=t(4914),M=t(19650),F=t(60331),se=t(27049),D=t(97272),k=t(24565),A=t(20640),q=t.n(A),d=t(67294),n=t(85893),$=function(f){var _=f.dataList,ee=f.pagination,U=f.loading,O=f.showTag,b=O===void 0?!0:O,W=f.onImport,K=(0,d.useState)(!1),N=u()(K,2),ne=N[0],R=N[1],te=(0,d.useState)(0),w=u()(te,2),re=w[0],z=w[1],ae=(0,m.useModel)("@@initialState"),Z=ae.initialState,V=Z==null?void 0:Z.loginUser,J=function(){var G=ie()(Y()().mark(function l(y){var I;return Y()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(I=v.ZP.loading("\u6B63\u5728\u5220\u9664"),y){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,L.G9)({id:y});case 6:v.ZP.success("\u64CD\u4F5C\u6210\u529F"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),v.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+a.t0.message);case 12:return a.prev=12,I(),a.finish(12);case 15:case"end":return a.stop()}},l,null,[[3,9,12,15]])}));return function(y){return G.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"field-info-list",children:[(0,n.jsx)(E.ZP,{itemLayout:"vertical",size:"large",loading:U,pagination:ee,dataSource:_,renderItem:function(l,y){var I,S,a,C,p=JSON.parse(l.content);return(0,n.jsxs)(E.ZP.Item,{extra:W&&(0,n.jsx)(g.Z,{onClick:function(){W(l)},children:"\u5BFC\u5165"}),children:[(0,n.jsxs)(o.Z,{title:(0,n.jsxs)(M.Z,{align:"center",children:[(0,n.jsx)("div",{children:l.name}),(0,n.jsxs)("div",{children:[b&&l.reviewStatus===1&&(0,n.jsx)(F.Z,{color:"success",children:"\u516C\u5F00"}),l.userId===1&&(0,n.jsx)(F.Z,{color:"gold",children:"\u5B98\u65B9"})]})]}),column:3,children:[(0,n.jsx)(o.Z.Item,{label:"\u5B57\u6BB5\u540D",children:p.fieldName}),(0,n.jsx)(o.Z.Item,{label:"\u7C7B\u578B",children:(I=p.fieldType)!==null&&I!==void 0?I:"\u65E0"}),(0,n.jsx)(o.Z.Item,{label:"\u6CE8\u91CA",children:(S=p.comment)!==null&&S!==void 0?S:"\u65E0"}),(0,n.jsx)(o.Z.Item,{label:"\u9ED8\u8BA4\u503C",children:(a=p.defaultValue)!==null&&a!==void 0?a:"\u65E0"}),(0,n.jsx)(o.Z.Item,{label:"\u81EA\u589E",children:p.autoIncrement?"\u662F":"\u5426"}),(0,n.jsx)(o.Z.Item,{label:"\u4E3B\u952E",children:p.primaryKey?"\u662F":"\u5426"}),(0,n.jsx)(o.Z.Item,{label:"\u975E\u7A7A",children:p.notNull?"\u662F":"\u5426"}),(0,n.jsx)(o.Z.Item,{label:"onUpdate",children:(C=p.onUpdate)!==null&&C!==void 0?C:"\u65E0"})]}),(0,n.jsxs)(M.Z,{split:(0,n.jsx)(se.Z,{type:"vertical"}),style:{fontSize:14},children:[(0,n.jsx)(D.Z.Text,{type:"secondary",children:l.createTime.toString().split("T")[0]}),(0,n.jsx)(g.Z,{type:"text",onClick:function(){(0,L.Lj)(l.id).then(function(B){q()(B.data),v.ZP.success("\u590D\u5236\u521B\u5EFA\u5B57\u6BB5 SQL \u6210\u529F")}).catch(function(B){v.ZP.error("\u590D\u5236\u5931\u8D25\uFF0C"+B.message)})},children:"\u590D\u5236\u8BED\u53E5"}),(0,n.jsx)(g.Z,{type:"text",onClick:function(){z(l.id),R(!0)},children:"\u4E3E\u62A5"}),V&&V.id===l.userId&&(0,n.jsx)(k.Z,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u4E48\uFF1F",onConfirm:function(){J(l.id)},children:(0,n.jsx)(g.Z,{type:"text",danger:!0,children:"\u5220\u9664"})})]})]},y)}}),(0,n.jsx)(x.Z,{visible:ne,reportedId:re,onClose:function(){R(!1)}})]})},r=$,s=t(91894),c=t(4107),e=t(14277),le=10,de=function(f){var _=f.title,ee=_===void 0?"\u5B57\u6BB5\u4FE1\u606F\u5217\u8868":_,U=f.needLogin,O=U===void 0?!1:U,b=f.showTag,W=b===void 0?!0:b,K=f.onLoad,N=f.onImport,ne=(0,d.useState)([]),R=u()(ne,2),te=R[0],w=R[1],re=(0,d.useState)(0),z=u()(re,2),ae=z[0],Z=z[1],V=(0,d.useState)(!0),J=u()(V,2),G=J[0],l=J[1],y={current:1,pageSize:le,sortField:"createTime",sortOrder:"descend"},I=(0,d.useState)(y),S=u()(I,2),a=S[0],C=S[1],p=(0,m.useModel)("@@initialState"),T=p.initialState,B=T==null?void 0:T.loginUser,pe=function(){(0,L.ti)(i()(i()({},a),{},{reviewStatus:1})).then(function(j){w(j.data.records),Z(j.data.total)}).catch(function(j){v.ZP.error("\u52A0\u8F7D\u5931\u8D25\uFF0C"+j.message)})};return(0,d.useEffect)(function(){O&&!B||(l(!0),K?K(a,w,Z):pe(),l(!1))},[a]),(0,n.jsx)("div",{className:"field-info-card",children:(0,n.jsx)(s.Z,{title:ee,extra:(0,n.jsx)(m.Link,{to:"/",children:(0,n.jsx)(g.Z,{type:"primary",children:"\u53BB\u521B\u5EFA"})}),children:!O||B?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(M.Z,{children:(0,n.jsx)(c.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",enterButton:"\u641C\u7D22",onSearch:function(j){C(i()(i()({},y),{},{searchName:j}))}})}),(0,n.jsx)(r,{pagination:{total:ae,onChange:function(j){C(i()(i()({},a),{},{current:j})),window.scrollTo({top:0})},pageSize:le},dataList:te,loading:G,showTag:W,onImport:N})]}):(0,n.jsx)(e.Z,{description:(0,n.jsx)(m.Link,{to:"/user/login",children:(0,n.jsx)(g.Z,{type:"primary",ghost:!0,style:{marginTop:8},children:"\u8BF7\u5148\u767B\u5F55"})})})})})},ce=de},91154:function(oe,Q,t){t.d(Q,{G9:function(){return q},Jn:function(){return k},Lj:function(){return n},ap:function(){return M},lU:function(){return v},mX:function(){return L},ti:function(){return g}});var X=t(17061),i=t.n(X),H=t(17156),u=t.n(H),h=t(18036);function Y(r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/field_info/list",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function ie(r){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/field_info/my/list",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function L(r){return m.apply(this,arguments)}function m(){return m=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/my/add/list/page",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),m.apply(this,arguments)}function v(r){return E.apply(this,arguments)}function E(){return E=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/my/list/page",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),E.apply(this,arguments)}function g(r){return o.apply(this,arguments)}function o(){return o=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/list/page",{method:"GET",params:s}));case 1:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function M(r){return F.apply(this,arguments)}function F(){return F=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/add",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),F.apply(this,arguments)}function se(r){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function r(s){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/field_info/get",{method:"GET",params:{id:s}}));case 1:case"end":return e.stop()}},r)})),D.apply(this,arguments)}function k(r){return A.apply(this,arguments)}function A(){return A=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/update",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),A.apply(this,arguments)}function q(r){return d.apply(this,arguments)}function d(){return d=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/delete",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),d.apply(this,arguments)}function n(r){return $.apply(this,arguments)}function $(){return $=u()(i()().mark(function r(s){return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.request)("/field_info/generate/sql",{method:"POST",headers:{"Content-Type":"application/json"},data:s}));case 1:case"end":return e.stop()}},r)})),$.apply(this,arguments)}}}]);
