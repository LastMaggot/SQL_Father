"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[546],{95546:function(ie,N,t){t.d(N,{Z:function(){return de}});var V=t(42122),s=t.n(V),Y=t(27424),i=t.n(Y),f=t(17061),J=t.n(f),C=t(17156),ae=t.n(C),P=t(7189),Z=t(93351),p=t(18036),h=t(48086),I=t(38272),m=t(71577),v=t(4914),L=t(19650),S=t(60331),Q=t(27049),B=t(97272),k=t(24565),x=t(20640),H=t.n(x),o=t(67294),n=t(85893),M=function(c){var $=c.dataList,X=c.pagination,A=c.loading,D=c.showTag,F=D===void 0?!0:D,G=c.onImport,U=(0,o.useState)(!1),W=i()(U,2),q=W[0],O=W[1],ee=(0,o.useState)(0),R=i()(ee,2),te=R[0],_=R[1],ne=(0,p.useModel)("@@initialState"),j=ne.initialState,z=j==null?void 0:j.loginUser,K=function(){var w=ae()(J()().mark(function l(g){var y;return J()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(y=h.ZP.loading("\u6B63\u5728\u5220\u9664"),g){a.next=3;break}return a.abrupt("return",!0);case 3:return a.prev=3,a.next=6,(0,Z.U3)({id:g});case 6:h.ZP.success("\u64CD\u4F5C\u6210\u529F"),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(3),h.ZP.error("\u64CD\u4F5C\u5931\u8D25\uFF0C"+a.t0.message);case 12:return a.prev=12,y(),a.finish(12);case 15:case"end":return a.stop()}},l,null,[[3,9,12,15]])}));return function(g){return w.apply(this,arguments)}}();return(0,n.jsxs)("div",{className:"table-info-list",children:[(0,n.jsx)(I.ZP,{itemLayout:"vertical",size:"large",loading:A,pagination:X,dataSource:$,renderItem:function(l,g){var y,b=JSON.parse(l.content);return(0,n.jsxs)(I.ZP.Item,{extra:G&&(0,n.jsx)(m.Z,{onClick:function(){G(l)},children:"\u5BFC\u5165"}),children:[(0,n.jsxs)(v.Z,{title:(0,n.jsxs)(L.Z,{align:"center",children:[(0,n.jsx)("div",{children:l.name}),(0,n.jsxs)("div",{children:[F&&l.reviewStatus===1&&(0,n.jsx)(S.Z,{color:"success",children:"\u516C\u5F00"}),l.userId===1&&(0,n.jsx)(S.Z,{color:"gold",children:"\u5B98\u65B9"})]})]}),column:2,children:[(0,n.jsx)(v.Z.Item,{label:"\u8868\u540D",children:b.tableName}),(0,n.jsx)(v.Z.Item,{label:"\u8868\u6CE8\u91CA",children:(y=b.tableComment)!==null&&y!==void 0?y:"\u65E0"}),(0,n.jsx)(v.Z.Item,{label:"\u5B57\u6BB5\u5217\u8868",children:b.fieldList.map(function(a){return a.fieldName}).join(", ")})]}),(0,n.jsxs)(L.Z,{split:(0,n.jsx)(Q.Z,{type:"vertical"}),style:{fontSize:14},children:[(0,n.jsx)(B.Z.Text,{type:"secondary",children:l.createTime.toString().split("T")[0]}),(0,n.jsx)(m.Z,{type:"text",onClick:function(){(0,Z.RY)(l.id).then(function(E){H()(E.data),h.ZP.success("\u590D\u5236\u5EFA\u8868 SQL \u6210\u529F")}).catch(function(E){h.ZP.error("\u590D\u5236\u5931\u8D25\uFF0C"+E.message)})},children:"\u590D\u5236\u8BED\u53E5"}),(0,n.jsx)(m.Z,{type:"text",onClick:function(){_(l.id),O(!0)},children:"\u4E3E\u62A5"}),z&&z.id===l.userId&&(0,n.jsx)(k.Z,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u4E48\uFF1F",onConfirm:function(){K(l.id)},children:(0,n.jsx)(m.Z,{type:"text",danger:!0,children:"\u5220\u9664"})})]})]},g)}}),(0,n.jsx)(P.Z,{visible:q,reportedId:te,onClose:function(){O(!1)}})]})},r=M,u=t(91894),d=t(4107),e=t(14277),se=10,oe=function(c){var $=c.title,X=$===void 0?"\u8868\u4FE1\u606F\u5217\u8868":$,A=c.needLogin,D=A===void 0?!1:A,F=c.showTag,G=F===void 0?!0:F,U=c.onLoad,W=c.onImport,q=(0,o.useState)([]),O=i()(q,2),ee=O[0],R=O[1],te=(0,o.useState)(0),_=i()(te,2),ne=_[0],j=_[1],z=(0,o.useState)(!0),K=i()(z,2),w=K[0],l=K[1],g={current:1,pageSize:se,sortField:"createTime",sortOrder:"descend"},y=(0,o.useState)(g),b=i()(y,2),a=b[0],E=b[1],fe=(0,p.useModel)("@@initialState"),re=fe.initialState,ue=re==null?void 0:re.loginUser,pe=function(){(0,Z.zr)(s()(s()({},a),{},{reviewStatus:1})).then(function(T){R(T.data.records),j(T.data.total)}).catch(function(T){h.ZP.error("\u52A0\u8F7D\u5931\u8D25\uFF0C"+T.message)})};return(0,o.useEffect)(function(){D&&!ue||(l(!0),U?U(a,R,j):pe(),l(!1))},[a]),(0,n.jsx)("div",{className:"table-info-card",children:(0,n.jsx)(u.Z,{title:X,extra:(0,n.jsx)(p.Link,{to:"/",children:(0,n.jsx)(m.Z,{type:"primary",children:"\u521B\u5EFA\u8868"})}),children:!D||ue?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(L.Z,{children:(0,n.jsx)(d.Z.Search,{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",enterButton:"\u641C\u7D22",onSearch:function(T){E(s()(s()({},g),{},{name:T}))}})}),(0,n.jsx)(r,{pagination:{total:ne,onChange:function(T){E(s()(s()({},a),{},{current:T})),window.scrollTo({top:0})},pageSize:se},showTag:G,dataList:ee,loading:w,onImport:W})]}):(0,n.jsx)(e.Z,{description:(0,n.jsx)(p.Link,{to:"/user/login",children:(0,n.jsx)(m.Z,{type:"primary",ghost:!0,style:{marginTop:8},children:"\u8BF7\u5148\u767B\u5F55"})})})})})},de=oe},93351:function(ie,N,t){t.d(N,{RY:function(){return n},SC:function(){return Z},U3:function(){return H},ee:function(){return L},fZ:function(){return k},kP:function(){return Q},v4:function(){return h},zr:function(){return m}});var V=t(17061),s=t.n(V),Y=t(17156),i=t.n(Y),f=t(18036);function J(r){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/table_info/list",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),C.apply(this,arguments)}function ae(r){return P.apply(this,arguments)}function P(){return P=_asyncToGenerator(_regeneratorRuntime().mark(function r(u){return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",request("/table_info/my/list",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),P.apply(this,arguments)}function Z(r){return p.apply(this,arguments)}function p(){return p=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/my/add/list/page",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),p.apply(this,arguments)}function h(r){return I.apply(this,arguments)}function I(){return I=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/my/list/page",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),I.apply(this,arguments)}function m(r){return v.apply(this,arguments)}function v(){return v=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/list/page",{method:"GET",params:u}));case 1:case"end":return e.stop()}},r)})),v.apply(this,arguments)}function L(r){return S.apply(this,arguments)}function S(){return S=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/add",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),S.apply(this,arguments)}function Q(r){return B.apply(this,arguments)}function B(){return B=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/get",{method:"GET",params:{id:u}}));case 1:case"end":return e.stop()}},r)})),B.apply(this,arguments)}function k(r){return x.apply(this,arguments)}function x(){return x=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/update",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),x.apply(this,arguments)}function H(r){return o.apply(this,arguments)}function o(){return o=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/delete",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),o.apply(this,arguments)}function n(r){return M.apply(this,arguments)}function M(){return M=i()(s()().mark(function r(u){return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,f.request)("/table_info/generate/sql",{method:"POST",headers:{"Content-Type":"application/json"},data:u}));case 1:case"end":return e.stop()}},r)})),M.apply(this,arguments)}}}]);
